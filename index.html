<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="css/normalize.css">
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->
		<div class="panel" id="panel">
			<!-- Folders -->
			<ul class="buttons" data-bind="foreach: folders">
			    <li data-bind="text: $data, 
			                   css: { selected: $data == $root.chosenFolderId() },
			                   click: $root.goToFolder"></li>
			</ul>
		</div>
		
		<div class="search">
			<form data-bind="submit: searchAlbum">
				<input name="q">
			    <button type="submit">Submit</button>
			</form>
		</div>
		
		<div id="container" class="container">	
		
			<!-- Library by albums grid -->
			<div>
			    <ul data-bind="foreach: chosenAlbumsInLibrary">
			        <li>
			        	<span data-bind="text: artist"></span>
			    		<ul data-bind="foreach: albums">
					        <li>
					    		<span data-bind="text: album"></span>
					        </li>     
					    </ul>    
			        </li>     
			    </ul>
			</div>
			
			<!-- Album grid -->
			<div class="album" data-bind="with: chosenAlbumData">
				<h1 data-bind="text: album.name"></h1>
				<button data-bind="click: $root.qw">Add Album To Playlist</button>
			    <ul data-bind="foreach: album.tracks.track">
			        <li>
			            <span data-bind="text: name"></span>
			        </li>     
			    </ul>
			</div>
			
			<!-- Artists grid -->
			<div class="artists" data-bind="with: chosenFolderData">
			    <ul data-bind="foreach: similarartists.artist">
			        <li data-bind="click: $root.goToArtist">
			            <span data-bind="text: name"></span>
			            <img data-bind="attr: { src: image[2]['#text'].splice( 37, 0, 's' ) }">
			        </li>     
			    </ul>
			</div>
			
			<!-- Chosen mail -->
			<div class="viewMail" data-bind="with: chosenArtistData">
			    <div class="mailInfo">
			        <h1 data-bind="text: artist.name"></h1>
			        <div class="row-fluid">
			        	<div class="span6">
				        	<div class="albums" data-bind="with: $root.chosenArtistAlbums">
						        <ul data-bind="foreach: topalbums.album">
							        <li data-bind="click: $root.goToAlbum">
							            <span data-bind="text: name"></span>
							            <img data-bind="attr: { src: image[2]['#text'] }">
							        </li>     
							    </ul>
					        </div>
			        	</div>
			        	<div class="span6">
			        		<div class="songs" data-bind="with: $root.chosenArtistTopSongs">
						        <ul data-bind="foreach: songs">
							        <li>	
							            <strong data-bind="text: artist"></strong>
							            <span data-bind="text: song"></span>
							            <audio data-bind="attr: { src: url }" controls></audio>
							        </li>     
							    </ul>
					        </div>
			        	</div>
			        </div>
			    </div>
			</div>
		</div>
		
		<script src="js/vendor/jquery.js"></script>
		<script src="js/vendor/knockout-2.2.1.js"></script>
		<script src="js/vendor/sammy.js"></script>
		<script src="http://vkontakte.ru/js/api/openapi.js" type="text/javascript"></script>
		<script type="text/javascript">
		  VK.init({
		    apiId: 3504957
		  });
		  VK.api('audio.get', {q: 'tratata'}, function(data) { 
		  	console.log(data);
		  }); 
		</script>
		
		<script src="js/lastfm.proxy.js"></script>
		<script src="js/vk.proxy.js"></script>
		<script src="js/db.js"></script>
		<script src="js/api.facade.js"></script>
		
		<script>
			String.prototype.splice = function( idx, rem, s ) {
			    return (this.slice(0,idx) + s + this.slice(idx + Math.abs(rem)));
			};
        </script>
        
        <script src="js/app.js"></script>
        
    </body>
</html>
